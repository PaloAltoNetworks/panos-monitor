{% extends 'base.html' %}

{% block content %}
    <style>
      main.container {
        max-width: 1600px;
      }
    </style>

    <article>
        <h2>Configuration Settings</h2>
        <p>Set the global API credentials and polling interval here.</p>

        <form method="post">
            <fieldset>
                <legend>Firewall Polling Settings</legend>
                <div class="grid">
                    <label for="username">
                        API Username
                        <input type="text" id="username" name="username" placeholder="Username for Firewalls" value="{{ settings.get('FW_USER', '') }}" required>
                    </label>
                    <label for="password">
                        API Password
                        <input type="password" id="password" name="password" placeholder="Leave blank to keep current">
                    </label>
                </div>
                <label for="interval">Polling Interval (seconds)</label>
                <input type="number" id="interval" name="interval" value="{{ settings.get('POLL_INTERVAL', 30) }}" required>
            </fieldset>

            <hr>

            {# ## This is the new section for Panorama ## #}
            <fieldset>
                <legend>Panorama Import Settings</legend>
                <label for="pano_host">Panorama Hostname or IP</label>
                <input type="text" id="pano_host" name="pano_host" placeholder="e.g., panorama.example.com" value="{{ settings.get('PANORAMA_HOST', '') }}">
                <div class="grid">
                    <label for="pano_user">
                        Panorama Username
                        <input type="text" id="pano_user" name="pano_user" value="{{ settings.get('PANORAMA_USER', '') }}">
                    </label>
                    <label for="pano_pass">
                        Panorama Password
                        <input type="password" id="pano_pass" name="pano_pass" placeholder="Leave blank to keep current">
                    </label>
                </div>
            </fieldset>

            <hr>

            <fieldset>
                <legend>Alerting Settings</legend>
                <label for="alert_threshold">Capacity Alert Threshold (%)
                    <input type="number" id="alert_threshold" name="alert_threshold" value="{{ settings.get('ALERT_THRESHOLD', 80) }}" required min="1" max="99">
                </label>
                <small>Generate an alert when any capacity metric exceeds this utilization percentage.</small>
            </fieldset>

            <button type="submit">Save Settings</button>
        </form>
    </article>
{% endblock %}